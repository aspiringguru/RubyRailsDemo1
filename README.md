# Setup

based on this tutorial
https://guides.rubyonrails.org/getting_started.html#installing-rails

Ruby install complete prior.
refer > https://gorails.com/setup/ubuntu/18.04

```
sqlite3 --version
ruby -v
rails --version
```


# wip notes
```
rails new blog  
cd /mnt/d/2019_working/coding/RubyRailsDemo/blog/
#or
cd blog  
rails server  
```
view results  
http://localhost:3000/  
[https://github.com/aspiringguru/RubyRailsDemo1/tree/86dcdbeb9b1c1cc5acf50a05f6d9f61b8ca41d07]
```
rails routes
rails generate controller Welcome index
```
creates controller 'Welcome' with action called  'index'

```
Running via Spring preloader in process 714
create  app/controllers welcome_controller.rb
route  get 'welcome/index'
invoke erb
create    app/views/welcome
create    app/views/welcome/index.html.erb
invoke  test_unit
create    test/controllers/welcome_controller_test.rb
invoke  helper
create    app/helpers/welcome_helper.rb
invoke    test_unit
invoke  assets
invoke    scss
create      app/assets/stylesheets/welcome.scss
```

```
vim app/views/welcome/index.html.erb
```
this url will load a page generated by the above file.
http://localhost:3000/welcome/index

this demo shows simple route
create file app/views/welcome/demo1.html.erb
add line 'get 'welcome/demo1' to  config/routes.rb
http://localhost:3000/welcome/demo1

Now setup default route
```
vim config/routes.rb
#insert this line
root 'welcome#index'
```
the new line redirects   
http://localhost:3000/welcome/index  
to    
http://localhost:3000/  
for info
https://guides.rubyonrails.org/routing.html

```
rails routes | grep articles
```
nb: nil results before adding 'resources :articles' to config/routes.rb
after adding to config/routes.rb - get routes for articles


5.1  Laying down the groundwork

http://localhost:3000/articles/new
error message in browser
```
Routing Error
uninitialized constant ArticlesController Did you mean? AbstractController
Rails.root: /mnt/d/2019_working/coding/RubyRailsDemo/blog
```
error message in console / logs
```
Started GET "/articles/new" for ::1 at 2019-10-08 15:22:47 +1000
ActionController::RoutingError (uninitialized constant ArticlesController
  Did you mean?  AbstractController):
```

```
rails generate controller Articles
```
this creates app/controllers/articles_controller.rb
now error is different
error in browser
```
Unknown action
The action 'new' could not be found for ArticlesController
```
error in console/log
```
Started GET "/articles/new" for ::1 at 2019-10-08 15:25:59 +1000
(0.1ms)  SELECT sqlite_version(*)
AbstractController::ActionNotFound (The action 'new' could not be found for ArticlesController):
```
add new method inside controller
now error message is different
browser error message
```
No template for interactive request
ArticlesController#new is missing a template for request formats: text/html
```
console/log error message
```
Started GET "/articles/new" for ::1 at 2019-10-08 15:29:06 +1000
Processing by ArticlesController#new as HTML
Completed 406 Not Acceptable in 1ms (ActiveRecord: 0.0ms | Allocations: 628)
ActionController::MissingExactTemplate (ArticlesController#new is missing a template for request formats: text/html):
```

https://github.com/aspiringguru/RubyRailsDemo1/tree/976c5ff9a9c23e2de13ca89797a97d3856132c4c

5.2 The first form

```
vim app/views/articles/new.html.erb
```
add code to generate form & load this url
http://localhost:3000/articles/new

submitting the form produces error
```
Routing Error
No route matches [POST] "/articles/new"
Rails.root: /mnt/d/2019_working/coding/RubyRailsDemo/blog
```

```
vim app/views/articles/new.html.erb
#due to no url, POST route goes to /articles/new
<%= form_with scope: :article, local: true do |form| %>
#change the form to route POST to
<%= form_with scope: :article, url: articles_path, local: true do |form| %>
```

https://github.com/aspiringguru/RubyRailsDemo1/tree/036959d3b03585efd811cdc63604c5677eed8906
5.4 Creating the Article model

```
rails generate model Article title:string text:text
```
generate table 'article' table in database with columns title (values are text) and string (values are text).  
rails creates 2 files  
app/models/article.rb    
db/migrate/xxxxxxxxxxxxxxxxx_create_articles.rb  

https://github.com/aspiringguru/RubyRailsDemo1/tree/381f9c32938b90b5bc40cc93ea1612cf7524d425
5.5 Running a Migration

```
rails db:migrate
```
creates table in database

5.6 Saving data in the controller

```
vim app/controllers/articles_controller.rb
```

http://localhost:3000/articles/new
complete and submit form
http://localhost:3000/articles
```
ActiveModel::ForbiddenAttributesError in ArticlesController#create
ActiveModel::ForbiddenAttributesError
```
add the private method to app/controllers/articles_controller.rb
